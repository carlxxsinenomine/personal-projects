<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Manager</title>
    <style>

        body {
            background-color: rgba(0, 0, 0, 0.246);
            padding-block: 9em;
            display: flex;
            flex-direction: row;
            justify-content: center;
        }

        .flex-container {
            background-color: #001F3F;
            box-shadow: 9px 8px 1px black;
            border-style: solid;
            border-radius: 10px;
            border-width: 1%;
            width: 200px;
            padding-inline: 40px;
            padding-top: 10px;
            padding-bottom: 50px;
            text-align: center;
            flex-direction: column;
        }

        .title {
            font-family: Arial, Helvetica, sans-serif;
            font-weight: bold;
            color: #EAD8B1;
            margin-bottom: 20px;
        }

        .email-container {
            margin-bottom: 0px;
        }

        .email-entry {
            background-color: #EAD8B1;
            border-style: solid;
            border-radius: 10px;
            border-width: 1%;
            border-color: black;
            color: black;
            padding-block: 9px;
            padding-inline: 10px;
            margin-bottom: 8px;

        }

        .password-container {
            margin-top: 0px;
        }

        .password-entry {
            display: inline;
            background-color: #EAD8B1;
            border-style: solid;
            border-radius: 10px;
            border-width: 1%;
            border-color: black;
            padding-block: 9px;
            padding-inline: 10px;
            margin-bottom: 8px;
        }

        .show {
            background-color: #EAD8B1;
            border-style: solid;
            border-radius: 10px;
            border-width: 1%;
            border-color: black;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .show_label {
            margin-right: 13px;
            color: #EAD8B1;
            font-family: Arial, Helvetica, sans-serif;
            font-weight: bold;
            font-size: 12px;
        }

        .generate-button {
            color: #EAD8B1;
            background-color: #3A6D8C;
            border-style: solid;
            border-radius: 10px;
            border-width: 1%;
            border-color: black;
            padding-inline: 20px;
            padding-block: 5px;
            margin-right: 18px;
            cursor: pointer;
        } 

        .add-to-db {
            color: #EAD8B1;
            background-color: #3A6D8C;
            border-style: solid;
            border-radius: 10px;
            border-width: 1%;
            border-color: black;
            padding-inline: 20px;
            padding-block: 5px;
            cursor: pointer;
        }

    </style>
</head>
<body>
    <div class="flex-container">
        <p class="title">Password Manager</p>
        <form method="POST" action="/">
            {{ form.csrf_token }}
            <div class="email-container">
                {{ form.email(class="email-entry") }}
<!--            <input type="email" class="email-entry" placeholder="Enter email">-->
            </div>
            <div class="password-container">
                {{ form.password(class="password-entry", id="password-entry") }} <!-- Add an ID for the password field -->
                <input type="checkbox" id="show" class="show" name="show_password" onclick="togglePasswordVisibility()">
                <label for="show" class="show_label">Show Password</label>
<!--                <button type="button" name="generate" class="generate-button">Generate</button>-->
                <button type="button" name="generate" class="generate-button" onclick="generatePassword()">Generate</button>
                {{ form.add(class="add-to-db") }}
<!--                <input type="password" placeholder="Enter password" class="password-entry">-->
<!--                <button class="add-to-db">Add</button>-->
            </div>
        </form>
    </div>

     <script>
function generatePassword() {
    const letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const numbers = '0123456789';
    const symbols = '!#$%&()*+';

    const passwordLength = Math.floor(Math.random() * (10 - 8 + 1)) + 8; // Random length between 8 and 10
    let password = '';

    // Generate random letters
    for (let i = 0; i < passwordLength - 4; i++) {
        password += letters.charAt(Math.floor(Math.random() * letters.length));
    }

    // Add random symbols
    for (let i = 0; i < 2; i++) {
        password += symbols.charAt(Math.floor(Math.random() * symbols.length));
    }

    // Add random numbers
    for (let i = 0; i < 2; i++) {
        password += numbers.charAt(Math.floor(Math.random() * numbers.length));
    }

    // Shuffle the password
    password = password.split('').sort(() => Math.random() - 0.5).join('');

    // Set the generated password to the password entry
    document.getElementById('password-entry').value = password;
}

function togglePasswordVisibility() {
    const passwordField = document.getElementById('password-entry');
    passwordField.type = passwordField.type === 'password' ? 'text' : 'password';
}
</script>
</body>
</html>